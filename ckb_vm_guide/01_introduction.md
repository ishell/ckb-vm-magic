# ç¬¬ä¸€ç« ï¼šå¼€ç¯‡ - ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæœºï¼Ÿ

> ä»"å¦‚æœä½ æƒ³é€ ä¸€å°å®‰å…¨çš„è®¡ç®—æœº"è®²èµ·

---

## ğŸ“– æœ¬ç« å¯¼èˆª

- [æ•…äº‹çš„å¼€å§‹ï¼šä¸‰å¤§æŒ‘æˆ˜](#æ•…äº‹çš„å¼€å§‹ä¸‰å¤§æŒ‘æˆ˜)
- [è™šæ‹Ÿæœºï¼šæ²™ç›’ä¸­çš„è®¡ç®—ä¸–ç•Œ](#è™šæ‹Ÿæœºæ²™ç›’ä¸­çš„è®¡ç®—ä¸–ç•Œ)
- [åŒºå—é“¾ä¸ºä»€ä¹ˆç¦»ä¸å¼€è™šæ‹Ÿæœº](#åŒºå—é“¾ä¸ºä»€ä¹ˆç¦»ä¸å¼€è™šæ‹Ÿæœº)
- [CKB-VM çš„ä½¿å‘½](#ckb-vm-çš„ä½¿å‘½)

---

## ğŸ­ æ•…äº‹çš„å¼€å§‹ï¼šä¸‰å¤§æŒ‘æˆ˜

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ˜¯ä¸€ä½åŒºå—é“¾çš„å®ˆæŠ¤è€…ã€‚ä½ çš„ä»»åŠ¡æ˜¯è®©æˆåƒä¸Šä¸‡çš„äººåœ¨åŒä¸€ä¸ª"ä¸–ç•Œ"é‡Œæ‰§è¡Œå„ç§å„æ ·çš„ç¨‹åºï¼š

- ğŸ‘¤ Alice æƒ³è½¬è´¦ç»™ Bob
- ğŸ¢ Carol æƒ³åˆ›å»ºä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„äº¤æ˜“æ‰€
- ğŸ® Dave æƒ³è¿è¡Œä¸€ä¸ªé“¾ä¸Šæ¸¸æˆ
- ğŸ” Eve æƒ³éƒ¨ç½²æ–°çš„åŠ å¯†ç®—æ³•

ä½†é—®é¢˜æ¥äº†...

### âš ï¸ æŒ‘æˆ˜ 1ï¼šä¿¡ä»»å±æœº

**é—®é¢˜**ï¼šä½ æ€ä¹ˆçŸ¥é“è¿™äº›ç¨‹åºä¸ä¼šå·å·åšåäº‹ï¼Ÿ

```c
// æ¶æ„ç¨‹åºç¤ºä¾‹ï¼šæ— é™å¾ªç¯
while (1) {
    // è€—å°½æ‰€æœ‰èµ„æºï¼Œè®©æ•´ä¸ªåŒºå—é“¾åœæ­¢å·¥ä½œï¼
}
```

```c
// æ¶æ„ç¨‹åºç¤ºä¾‹ï¼šè®¿é—®ä¸è¯¥è®¿é—®çš„å†…å­˜
char* secret = (char*)0x12345678;  // éšæœºåœ°å€
printf("%s", secret);  // å¯èƒ½æ³„éœ²æ•æ„Ÿæ•°æ®ï¼
```

**åæœ**ï¼š
- ğŸ’£ æ¶æ„ç¨‹åºå¯èƒ½è€—å°½èµ„æºï¼ˆDOS æ”»å‡»ï¼‰
- ğŸ”“ å¯èƒ½çªƒå–å…¶ä»–ç”¨æˆ·çš„æ•°æ®
- ğŸ’¥ å¯èƒ½ç ´åæ•´ä¸ªç³»ç»Ÿ

---

### âš ï¸ æŒ‘æˆ˜ 2ï¼šç¡®å®šæ€§é­”å’’

**é—®é¢˜**ï¼šåŒºå—é“¾æœ‰ä¸ª"é“å¾‹" - **åŒæ ·çš„è¾“å…¥å¿…é¡»äº§ç”ŸåŒæ ·çš„è¾“å‡º**

ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå…¨ç½‘çš„èŠ‚ç‚¹éœ€è¦éªŒè¯äº¤æ˜“ï¼Œå¦‚æœæ¯ä¸ªèŠ‚ç‚¹è®¡ç®—ç»“æœä¸ä¸€æ ·ï¼Œå°±æ— æ³•è¾¾æˆå…±è¯†ï¼

**çœŸå®æ¡ˆä¾‹ï¼šæµ®ç‚¹æ•°é™·é˜±**

```c
// åœ¨ä¸åŒ CPU ä¸Šå¯èƒ½æœ‰ä¸åŒç»“æœï¼
double a = 0.1 + 0.2;
if (a == 0.3) {  // åœ¨æŸäº›å¹³å°ä¸Šæ˜¯ falseï¼
    printf("Equal\n");
} else {
    printf("Not equal\n");
}
```

```
Intel CPU:   0.30000000000000004 â‰  0.3
ARM CPU:     0.30000000000000004 â‰  0.3
RISC-V CPU:  0.30000000000000004 â‰  0.3
```

å³ä½¿éƒ½ä¸ç›¸ç­‰ï¼Œä½†å¦‚æœç²¾åº¦ä¸åŒï¼ŒéªŒè¯è¿˜æ˜¯ä¼šå¤±è´¥ï¼

**æ›´å¤šä¸ç¡®å®šæ€§æ¥æº**ï¼š
- æ“ä½œç³»ç»Ÿå·®å¼‚ï¼ˆWindows vs Linuxï¼‰
- ç¼–è¯‘å™¨ç‰ˆæœ¬å·®å¼‚ï¼ˆGCC 9 vs GCC 13ï¼‰
- ç¡¬ä»¶å·®å¼‚ï¼ˆIntel vs AMD vs ARMï¼‰
- æ—¶é—´ç›¸å…³å‡½æ•°ï¼ˆ`time()`, `rand()`ï¼‰

---

### âš ï¸ æŒ‘æˆ˜ 3ï¼šæ€§èƒ½ç„¦è™‘

**é—®é¢˜**ï¼šè™šæ‹Ÿæœºè¦è¶³å¤Ÿå¿«ï¼Œå¦åˆ™ç”¨æˆ·ä½“éªŒå¾ˆç³Ÿç³•

**æ€§èƒ½å¯¹æ¯”**ï¼ˆç›¸åŒè®¡ç®—ä»»åŠ¡ï¼‰ï¼š

```
ç›´æ¥è¿è¡Œæœ¬åœ°ä»£ç ï¼š      1.0x ï¼ˆåŸºå‡†ï¼‰
JVMï¼ˆJava è™šæ‹Ÿæœºï¼‰ï¼š     0.7x ï¼ˆæ…¢ 30%ï¼‰
Python è§£é‡Šå™¨ï¼š         0.1x ï¼ˆæ…¢ 10 å€ï¼‰
æŸäº›åŒºå—é“¾è™šæ‹Ÿæœºï¼š       0.01xï¼ˆæ…¢ 100 å€ï¼‰ğŸ˜±
```

**å½±å“**ï¼š
- â±ï¸ äº¤æ˜“ç¡®è®¤æ—¶é—´è¿‡é•¿
- ğŸ’° Gas è´¹ç”¨è¿‡é«˜
- ğŸ˜¤ ç”¨æˆ·ä½“éªŒå·®ï¼Œå¼€å‘è€…æµå¤±

---

## ğŸ° è™šæ‹Ÿæœºï¼šæ²™ç›’ä¸­çš„è®¡ç®—ä¸–ç•Œ

### ä»€ä¹ˆæ˜¯è™šæ‹Ÿæœºï¼Ÿ

**ç®€å•ç±»æ¯”**ï¼šè™šæ‹Ÿæœºå°±åƒä¸€ä¸ª"è®¡ç®—æœºæ¨¡æ‹Ÿå™¨"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         çœŸå®çš„ç‰©ç†è®¡ç®—æœº                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚       è™šæ‹Ÿæœºï¼ˆè½¯ä»¶æ¨¡æ‹Ÿï¼‰          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚   ç”¨æˆ·ç¨‹åºåœ¨è¿™é‡Œè¿è¡Œ      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   ï¼ˆè¢«è™šæ‹Ÿæœºæ§åˆ¶ï¼‰        â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                 â”‚   â”‚
â”‚  â”‚  âœ… éš”ç¦»ï¼šæ— æ³•è®¿é—®å¤–éƒ¨èµ„æº       â”‚   â”‚
â”‚  â”‚  âœ… æ§åˆ¶ï¼šæ¯æ­¥éƒ½è¢«ç›‘æ§           â”‚   â”‚
â”‚  â”‚  âœ… ç¡®å®šï¼šè¡Œä¸ºå®Œå…¨å¯é¢„æµ‹         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è™šæ‹Ÿæœºçš„å·¥ä½œåŸç†

#### æ¶æ„å›¾ï¼ˆMermaidï¼‰

```mermaid
graph TB
    subgraph "ç‰©ç†è®¡ç®—æœº"
        OS[æ“ä½œç³»ç»Ÿ]
        Hardware[ç¡¬ä»¶: CPU + å†…å­˜ + ç£ç›˜]
    end

    subgraph "è™šæ‹Ÿæœºå±‚"
        VM[è™šæ‹Ÿæœºå¼•æ“]
        VMem[è™šæ‹Ÿå†…å­˜]
        VReg[è™šæ‹Ÿå¯„å­˜å™¨]
    end

    subgraph "ç”¨æˆ·ç¨‹åº"
        Code[ç¨‹åºä»£ç ]
        Data[ç¨‹åºæ•°æ®]
    end

    Code --> VM
    VM --> VMem
    VM --> VReg
    VM --> OS
    OS --> Hardware

    style VM fill:#f9f,stroke:#333,stroke-width:4px
    style Hardware fill:#bbf,stroke:#333,stroke-width:2px
```

#### æ‰§è¡Œæµç¨‹ç¤ºä¾‹

```python
# ä¼ªä»£ç ï¼šè™šæ‹Ÿæœºå¦‚ä½•æ‰§è¡Œä¸€æ¡åŠ æ³•æŒ‡ä»¤

class VirtualMachine:
    def __init__(self):
        self.registers = [0] * 32  # 32 ä¸ªå¯„å­˜å™¨
        self.memory = [0] * 1024   # 1KB å†…å­˜
        self.pc = 0                # ç¨‹åºè®¡æ•°å™¨

    def execute_add(self, rd, rs1, rs2):
        # 1. æ£€æŸ¥æƒé™ï¼ˆæ˜¯å¦å…è®¸è®¿é—®å¯„å­˜å™¨ï¼‰
        if not self.check_register_access(rd, rs1, rs2):
            raise SecurityError("éæ³•å¯„å­˜å™¨è®¿é—®")

        # 2. è®¡ç®—ï¼ˆåœ¨éš”ç¦»ç¯å¢ƒä¸­ï¼‰
        result = self.registers[rs1] + self.registers[rs2]

        # 3. æ£€æŸ¥èµ„æºæ¶ˆè€—
        self.cycles += 1  # æ¯æ¡æŒ‡ä»¤è®¡è´¹
        if self.cycles > self.max_cycles:
            raise ResourceError("è¶…å‡ºè®¡ç®—é™åˆ¶")

        # 4. å†™å›ç»“æœï¼ˆåœ¨è™šæ‹Ÿå¯„å­˜å™¨ä¸­ï¼‰
        self.registers[rd] = result & 0xFFFFFFFF  # 32ä½

        # 5. æ›´æ–° PC
        self.pc += 4  # ç§»åŠ¨åˆ°ä¸‹ä¸€æ¡æŒ‡ä»¤
```

**å…³é”®ç‚¹**ï¼š
- âœ… **æ¯ä¸€æ­¥éƒ½è¢«ç›‘æ§**ï¼šè™šæ‹Ÿæœºæ§åˆ¶ç¨‹åºçš„æ¯ä¸ªåŠ¨ä½œ
- âœ… **éš”ç¦»æ‰§è¡Œ**ï¼šç¨‹åºæ— æ³•ç›´æ¥è®¿é—®ç‰©ç†ç¡¬ä»¶
- âœ… **èµ„æºè®¡é‡**ï¼šç²¾ç¡®è®¡ç®—æ¯æ¡æŒ‡ä»¤çš„æ¶ˆè€—

---

### è™šæ‹Ÿæœº vs ç›´æ¥è¿è¡Œå¯¹æ¯”

#### åœºæ™¯ï¼šæ‰§è¡Œä¸€ä¸ªç®€å•çš„åŠ æ³•

**ç›´æ¥è¿è¡Œæœ¬åœ°ä»£ç **ï¼š

```c
// C ä»£ç 
int add(int a, int b) {
    return a + b;
}

// ç¼–è¯‘åçš„ x86 æ±‡ç¼–
mov eax, edi      ; å–å‚æ•° a
add eax, esi      ; åŠ ä¸Šå‚æ•° b
ret               ; è¿”å›

// æ‰§è¡Œï¼šCPU ç›´æ¥è¿è¡Œï¼Œ1 ä¸ªæ—¶é’Ÿå‘¨æœŸ
```

**é—®é¢˜**ï¼š
- âŒ æ— æ³•é™åˆ¶èµ„æºæ¶ˆè€—
- âŒ æ— æ³•éš”ç¦»ï¼ˆå¯ä»¥è®¿é—®ä»»æ„å†…å­˜ï¼‰
- âŒ ä¸ç¡®å®šï¼ˆä¸åŒ CPU å¯èƒ½æœ‰å·®å¼‚ï¼‰

---

**åœ¨è™šæ‹Ÿæœºä¸­è¿è¡Œ**ï¼š

```c
// åŒæ ·çš„ C ä»£ç 
int add(int a, int b) {
    return a + b;
}

// ç¼–è¯‘ä¸º RISC-V æŒ‡ä»¤ï¼ˆè™šæ‹Ÿæœºçš„æŒ‡ä»¤é›†ï¼‰
add a0, a0, a1    ; è™šæ‹ŸæŒ‡ä»¤

// è™šæ‹Ÿæœºæ‰§è¡Œï¼ˆä¼ªä»£ç ï¼‰
vm.fetch_instruction(pc)       // 1. å–æŒ‡
vm.decode_instruction()         // 2. è§£ç 
vm.check_permission()           // 3. æƒé™æ£€æŸ¥
vm.meter_cycles(1)              // 4. è®¡è´¹
vm.execute_add(a0, a0, a1)      // 5. æ‰§è¡Œ
vm.update_pc()                  // 6. æ›´æ–° PC

// æ‰§è¡Œï¼šçº¦ 10-50 ä¸ªæ—¶é’Ÿå‘¨æœŸï¼ˆæœ‰å¼€é”€ï¼Œä½†æ¢æ¥å®‰å…¨ï¼‰
```

**å¥½å¤„**ï¼š
- âœ… å®Œå…¨éš”ç¦»ï¼ˆæ— æ³•è®¿é—®è™šæ‹Ÿæœºå¤–çš„èµ„æºï¼‰
- âœ… ç²¾ç¡®è®¡é‡ï¼ˆæ¯æ¡æŒ‡ä»¤éƒ½è®¡è´¹ï¼‰
- âœ… å®Œå…¨ç¡®å®šï¼ˆåœ¨ä»»ä½•å¹³å°ä¸Šç»“æœç›¸åŒï¼‰

---

## ğŸ”— åŒºå—é“¾ä¸ºä»€ä¹ˆç¦»ä¸å¼€è™šæ‹Ÿæœº

### åŒºå—é“¾çš„ç‰¹æ®Šéœ€æ±‚

| éœ€æ±‚ | ä¼ ç»Ÿåº”ç”¨ | åŒºå—é“¾åº”ç”¨ | è§£å†³æ–¹æ¡ˆ |
|------|---------|-----------|---------|
| **ä¿¡ä»»æ¨¡å‹** | ä¿¡ä»»æœåŠ¡å™¨ | é›¶ä¿¡ä»»ï¼ˆä¸ä¿¡ä»»ä»»ä½•äººï¼‰ | è™šæ‹Ÿæœºéš”ç¦» |
| **ç¡®å®šæ€§** | æ— è¦æ±‚ | ç»å¯¹ç¡®å®šï¼ˆå…¨ç½‘ä¸€è‡´ï¼‰ | è™šæ‹Ÿæœºæ ‡å‡†åŒ–æ‰§è¡Œ |
| **èµ„æºé™åˆ¶** | æ“ä½œç³»ç»Ÿç®¡ç† | å¿…é¡»ç²¾ç¡®è®¡è´¹ | è™šæ‹Ÿæœºè®¡é‡æ¯æ¡æŒ‡ä»¤ |
| **å¯å®¡è®¡æ€§** | æ—¥å¿—è®°å½• | å®Œå…¨é€æ˜å¯éªŒè¯ | è™šæ‹ŸæœºçŠ¶æ€å¯è¿½æº¯ |

---

### æ‰§è¡Œç¯å¢ƒå¯¹æ¯”

#### å¯¹æ¯”å›¾ï¼ˆMermaidï¼‰

```mermaid
graph LR
    subgraph "ä¼ ç»Ÿåº”ç”¨"
        A1[ç”¨æˆ·ç¨‹åº] --> A2[æ“ä½œç³»ç»Ÿ]
        A2 --> A3[ç‰©ç†ç¡¬ä»¶]
        A4[ä¿¡ä»»ï¼šæœåŠ¡å™¨æä¾›å•†]
    end

    subgraph "åŒºå—é“¾ï¼ˆæ— è™šæ‹Ÿæœºï¼‰"
        B1[æ™ºèƒ½åˆçº¦] --> B2[æ“ä½œç³»ç»Ÿ]
        B2 --> B3[ç‰©ç†ç¡¬ä»¶]
        B4[é—®é¢˜ï¼šæ— æ³•éªŒè¯ï¼]
        style B4 fill:#faa
    end

    subgraph "åŒºå—é“¾ï¼ˆæœ‰è™šæ‹Ÿæœºï¼‰"
        C1[æ™ºèƒ½åˆçº¦] --> C2[è™šæ‹Ÿæœº]
        C2 --> C3[æ“ä½œç³»ç»Ÿ]
        C3 --> C4[ç‰©ç†ç¡¬ä»¶]
        C5[âœ… å¯éªŒè¯ âœ… ç¡®å®š âœ… å®‰å…¨]
        style C5 fill:#afa
    end
```

---

### çœŸå®æ¡ˆä¾‹ï¼šä»¥å¤ªåŠ EVM

**ä»¥å¤ªåŠè™šæ‹Ÿæœºï¼ˆEVMï¼‰** æ˜¯æœ€è‘—åçš„åŒºå—é“¾è™šæ‹Ÿæœºï¼š

```solidity
// Solidity ä»£ç ï¼ˆä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ï¼‰
contract SimpleStorage {
    uint256 value;

    function set(uint256 newValue) public {
        value = newValue;  // è¿™è¡Œä»£ç åœ¨ EVM ä¸­æ‰§è¡Œ
    }
}
```

**EVM çš„å·¥ä½œ**ï¼š
1. å°† Solidity ç¼–è¯‘ä¸º EVM å­—èŠ‚ç 
2. åœ¨éš”ç¦»ç¯å¢ƒä¸­æ‰§è¡Œå­—èŠ‚ç 
3. è®¡ç®— Gas æ¶ˆè€—ï¼ˆèµ„æºè®¡è´¹ï¼‰
4. æ›´æ–°åŒºå—é“¾çŠ¶æ€

**ç»“æœ**ï¼š
- âœ… å…¨ç½‘èŠ‚ç‚¹æ‰§è¡Œç»“æœå®Œå…¨ä¸€è‡´
- âœ… æ¶æ„ä»£ç æ— æ³•ç ´åç³»ç»Ÿ
- âœ… èµ„æºæ¶ˆè€—å…¬å¹³è®¡è´¹

---

## ğŸ¯ CKB-VM çš„ä½¿å‘½

### CKB-VM ç®€ä»‹

**CKB-VM** æ˜¯ Nervos CKB åŒºå—é“¾çš„è™šæ‹Ÿæœºï¼Œå®ƒçš„ä½¿å‘½æ˜¯ï¼š

> **åœ¨ä¿è¯å®‰å…¨å’Œç¡®å®šæ€§çš„å‰æä¸‹ï¼Œæä¾›æœ€å¤§çš„çµæ´»æ€§å’Œæœ€é«˜çš„æ€§èƒ½**

### è®¾è®¡ç›®æ ‡

#### ç›®æ ‡ 1ï¼šç»å¯¹å®‰å…¨

```rust
// CKB-VM çš„ WXorX å†…å­˜ä¿æŠ¤
// W^X = Write XOR Executeï¼ˆå†…å­˜é¡µè¦ä¹ˆå¯å†™ï¼Œè¦ä¹ˆå¯æ‰§è¡Œï¼‰

// âœ… å…è®¸ï¼šæ‰§è¡Œä»£ç æ®µ
let code_page = memory.allocate(PAGE_EXECUTABLE);
vm.execute(code_page);

// âœ… å…è®¸ï¼šå†™å…¥æ•°æ®æ®µ
let data_page = memory.allocate(PAGE_WRITABLE);
memory.write(data_page, data);

// âŒ ç¦æ­¢ï¼šå†™å…¥åæ‰§è¡Œï¼ˆé˜²æ­¢ä»£ç æ³¨å…¥æ”»å‡»ï¼‰
let evil_page = memory.allocate(PAGE_WRITABLE);
memory.write(evil_page, malicious_code);
vm.execute(evil_page);  // ğŸ’¥ é”™è¯¯ï¼šè¿å WXorX åŸåˆ™ï¼
```

**å®‰å…¨æœºåˆ¶**ï¼š
- ğŸ›¡ï¸ WXorX å†…å­˜ä¿æŠ¤
- ğŸ”’ æ²™ç›’éš”ç¦»
- ğŸ“Š èµ„æºé™åˆ¶ï¼ˆCyclesï¼‰
- âœ… æƒé™æ£€æŸ¥

---

#### ç›®æ ‡ 2ï¼šå®Œå…¨ç¡®å®šæ€§

```rust
// CKB-VM çš„ç¡®å®šæ€§ä¿è¯

// âœ… å…è®¸ï¼šç¡®å®šæ€§æ“ä½œ
let a = 100;
let b = 200;
let result = a + b;  // æ°¸è¿œæ˜¯ 300

// âŒ ç¦æ­¢ï¼šéç¡®å®šæ€§æ“ä½œ
let timestamp = system_time();  // âŒ ä¸åŒèŠ‚ç‚¹æ—¶é—´ä¸åŒ
let random = rand();            // âŒ éšæœºæ•°ä¸ç¡®å®š
let file = read_file("/etc/passwd");  // âŒ è®¿é—®å¤–éƒ¨èµ„æº
```

**ç¡®å®šæ€§æ¥æº**ï¼š
- ğŸ“ RISC-V è§„èŒƒä¸¥æ ¼å®šä¹‰æ‰€æœ‰è¡Œä¸º
- ğŸš« ç¦æ­¢ç³»ç»Ÿè°ƒç”¨ï¼ˆé™¤éç™½åå•ï¼‰
- ğŸ”¢ æ•´æ•°è¿ç®—ï¼ˆæ— æµ®ç‚¹æ•°é™·é˜±ï¼‰
- ğŸ“¦ å›ºå®šçš„æ‰§è¡Œç¯å¢ƒ

---

#### ç›®æ ‡ 3ï¼šé«˜æ€§èƒ½

**CKB-VM çš„æ€§èƒ½ä¼˜åŒ–**ï¼ˆåç»­ç« èŠ‚è¯¦ç»†è®²è§£ï¼‰ï¼š

```
æ€§èƒ½å¯¹æ¯”ï¼ˆç›¸åŒè®¡ç®—ä»»åŠ¡ï¼‰ï¼š

ç›´æ¥è¿è¡Œæœ¬åœ°ä»£ç ï¼š       1.0x  ï¼ˆåŸºå‡†ï¼‰
CKB-VM (ASM æ¨¡å¼)ï¼š      0.8x  ï¼ˆä»…æ…¢ 20%ï¼ï¼‰âš¡
CKB-VM (è§£é‡Šå™¨æ¨¡å¼)ï¼š    0.3x  ï¼ˆæ…¢ 3 å€ï¼Œä½†ä»å¯æ¥å—ï¼‰
ä»¥å¤ªåŠ EVMï¼š             0.1x  ï¼ˆæ…¢ 10 å€ï¼‰
```

**ä¼˜åŒ–æŠ€æœ¯**ï¼š
- âš¡ Macro-Op Fusionï¼ˆæŒ‡ä»¤èåˆï¼‰
- ğŸ’¾ æŒ‡ä»¤ç¼“å­˜
- ğŸš€ é›¶æˆæœ¬æ³›å‹ï¼ˆRustï¼‰
- ğŸ¯ ASM æ¨¡å¼ï¼ˆæ±‡ç¼–çº§ä¼˜åŒ–ï¼‰

---

### CKB-VM çš„ç‹¬ç‰¹ä¹‹å¤„

#### å¯¹æ¯”è¡¨

| ç‰¹æ€§ | EVM (ä»¥å¤ªåŠ) | WASM (WebAssembly) | CKB-VM (Nervos) |
|------|-------------|-------------------|-----------------|
| **æŒ‡ä»¤é›†** | è‡ªå®šä¹‰æ ˆå¼ | è™šæ‹ŸæŒ‡ä»¤é›† | RISC-Vï¼ˆå¼€æºæ ‡å‡†ï¼‰|
| **æ€§èƒ½** | ğŸ˜ è¾ƒæ…¢ | ğŸ˜Š è¾ƒå¿« | âš¡ å¾ˆå¿« |
| **çµæ´»æ€§** | âš ï¸ å—é™ | âœ… è¾ƒå¥½ | âœ… æé«˜ï¼ˆä»»ä½•è¯­è¨€ï¼‰ |
| **ç¡®å®šæ€§** | âœ… æ˜¯ | âš ï¸ éœ€é…ç½® | âœ… æ˜¯ |
| **å·¥å…·é“¾** | Solidity ä¸“ç”¨ | å¤šè¯­è¨€ | **æ ‡å‡† GCC/LLVM** |
| **å¯å®¡è®¡æ€§** | ğŸ˜ ä¸­ç­‰ | ğŸ˜Š è¾ƒå¥½ | âœ… ä¼˜ç§€ï¼ˆç®€å•æŒ‡ä»¤é›†ï¼‰|

**CKB-VM çš„ä¼˜åŠ¿**ï¼š
- ğŸ—ï¸ ä½¿ç”¨å¼€æºçš„ RISC-V æŒ‡ä»¤é›†ï¼ˆæ— ä¸“åˆ©ã€æ˜“å®¡è®¡ï¼‰
- ğŸ¦€ ç”¨ Rust å®ç°ï¼ˆå†…å­˜å®‰å…¨ã€é›¶æˆæœ¬æŠ½è±¡ï¼‰
- ğŸŒ æ”¯æŒä»»ä½•èƒ½ç¼–è¯‘ä¸º RISC-V çš„è¯­è¨€ï¼ˆCã€Rustã€Go...ï¼‰
- âš¡ æ¥è¿‘æœ¬åœ°ä»£ç çš„æ€§èƒ½

---

## ğŸ¬ ç« èŠ‚æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **åŒºå—é“¾çš„ä¸‰å¤§æŒ‘æˆ˜**ï¼š
   - ä¿¡ä»»å±æœº â†’ éœ€è¦éš”ç¦»
   - ç¡®å®šæ€§é­”å’’ â†’ éœ€è¦æ ‡å‡†åŒ–
   - æ€§èƒ½ç„¦è™‘ â†’ éœ€è¦ä¼˜åŒ–

2. **è™šæ‹Ÿæœºçš„è§£å†³æ–¹æ¡ˆ**ï¼š
   - ğŸ° æ²™ç›’éš”ç¦» â†’ å®‰å…¨
   - ğŸ“ æ ‡å‡†åŒ–æ‰§è¡Œ â†’ ç¡®å®š
   - âš¡ ä¼˜åŒ–æŠ€æœ¯ â†’ æ€§èƒ½

3. **CKB-VM çš„ä½¿å‘½**ï¼š
   - ç»å¯¹å®‰å…¨ï¼ˆWXorXã€æ²™ç›’ï¼‰
   - å®Œå…¨ç¡®å®šï¼ˆRISC-V è§„èŒƒï¼‰
   - é«˜æ€§èƒ½ï¼ˆMacro-Op Fusion ç­‰ï¼‰

### ç±»æ¯”æ€»ç»“

> å¦‚æœåŒºå—é“¾æ˜¯ä¸€ä¸ª**æ°‘ä¸»å›½å®¶**ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå°±æ˜¯**æ³•å¾‹ç³»ç»Ÿ**ï¼š
> - ğŸ›ï¸ **å®ªæ³•**ï¼ˆRISC-V è§„èŒƒï¼‰ï¼šå®šä¹‰äº†ä»€ä¹ˆæ˜¯åˆæ³•çš„
> - âš–ï¸ **æ³•é™¢**ï¼ˆè™šæ‹Ÿæœºå¼•æ“ï¼‰ï¼šæ‰§è¡Œå’Œè£å†³
> - ğŸš” **è­¦å¯Ÿ**ï¼ˆæƒé™æ£€æŸ¥ï¼‰ï¼šé˜²æ­¢è¿è§„è¡Œä¸º
> - ğŸ“œ **é€æ˜å®¡è®¡**ï¼ˆçŠ¶æ€å¯è¿½æº¯ï¼‰ï¼šæ‰€æœ‰äººéƒ½èƒ½éªŒè¯

---

## ğŸ”œ ä¸‹ä¸€ç« é¢„å‘Š

åœ¨[ç¬¬äºŒç« ã€ŠæŠ€æœ¯é€‰å‹ï¼šRISC-V å’Œ Rustã€‹](02_tech_stack.md)ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ï¼š

- ğŸ—ï¸ **ä¸ºä»€ä¹ˆé€‰æ‹© RISC-V** è€Œä¸æ˜¯ x86/ARM/Wasmï¼Ÿ
  - æŒ‡ä»¤é›†çš„è¯¦ç»†å¯¹æ¯”
  - RISC-V çš„ç‹¬ç‰¹ä¼˜åŠ¿
  - å®Œæ•´çš„æ±‡ç¼–ä»£ç ç¤ºä¾‹

- ğŸ¦€ **ä¸ºä»€ä¹ˆé€‰æ‹© Rust** è€Œä¸æ˜¯ C/C++ï¼Ÿ
  - æ‰€æœ‰æƒç³»ç»Ÿçš„å†…å­˜å®‰å…¨
  - é›¶æˆæœ¬æŠ½è±¡çš„æ€§èƒ½ä¿è¯
  - ç¼–è¯‘å™¨ä¼˜åŒ–çš„é­”æ³•

---

## ğŸ“š æ‰©å±•é˜…è¯»

### å…¥é—¨èµ„æ–™
- [ä»€ä¹ˆæ˜¯è™šæ‹Ÿæœºï¼Ÿï¼ˆWikipediaï¼‰](https://en.wikipedia.org/wiki/Virtual_machine)
- [åŒºå—é“¾åŸºç¡€æ¦‚å¿µ](https://docs.nervos.org/docs/basics/introduction)

### æ·±åº¦é˜…è¯»
- [è™šæ‹Ÿæœºè®¾è®¡æ¨¡å¼](https://www.craftinginterpreters.com/)
- [åŒºå—é“¾æ‰§è¡Œç¯å¢ƒ](https://ethereum.org/en/developers/docs/evm/)

### ç›¸å…³è®ºæ–‡
- "A Secure Virtual Machine for Smart Contracts"
- "Deterministic Execution in Blockchain Systems"

---

**ç»§ç»­ä¸‹ä¸€ç« ** â†’ [ç¬¬äºŒç« ï¼šæŠ€æœ¯é€‰å‹](02_tech_stack.md)
